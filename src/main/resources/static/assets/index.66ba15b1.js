var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,l=(e,l)=>{for(var n in l||(l={}))t.call(l,n)&&i(e,n,l[n]);if(a)for(var n of a(l))s.call(l,n)&&i(e,n,l[n]);return e};import{u as n,T as r,H as o,P as u}from"./rounded-button.afd62da9.js";import{R as d,C as c}from"./index.4a9faac5.js";import{d as p,k as v,r as y,l as m,h as f,a6 as g,a7 as h,a8 as w,a9 as b,aa as x,n as P,B as k,F as j,ac as z,ad as C}from"./vendor.031f8059.js";var O=p((()=>{const{checkedRowKeys:e,data:a,fetchDataFn:t,pager:s,sortProps:i}=n(((e,a)=>async(t=1,s=10)=>{const i=await d.api.types.get({params:{page:t-1,size:s}});e.value=i.content,a.value={currentPage:i.pageable.pageNumber+1,size:i.size,hasNextPage:!i.last,hasPrevPage:!i.first,total:i.totalElements,totalPage:i.totalPages}})),p=v(),O=y(!1),T=y({name:"",id:void 0});m((()=>{t()}));const E=async()=>{const e=T.value.id;if(e){await d.api.types(e).put({data:T.value});const t=a.value.findIndex((a=>a.id==e));a.value[t]=l(l({},a.value[t]),C(T.value))}else{const e=await d.api.types.post({data:l({},T.value)});a.value.unshift(e)}p.success("操作成功"),T.value={name:"",id:void 0},O.value=!1};return()=>f(c,{actionsElement:f(j,null,f(o,{icon:f(u,null),variant:"primary",onClick:()=>{T.value={name:"",id:void 0},O.value=!0}}))},f(r,{data:a,pager:s,nTableProps:{childrenKey:"product"},columns:[{title:"名称",key:"name"},{title:"操作",key:"id",fixed:"right",render:e=>f(j,null,f(P,{wrap:!1},f(k,{text:!0,size:"tiny",type:"info",onClick:a=>{O.value=!0,T.value=l({},e)}},"编辑"),f(z,{positiveText:"取消",negativeText:"删除",onNegativeClick:async()=>{await d.api.types(e.id).delete(),p.success("删除成功"),await t()}},{trigger:()=>f(k,{text:!0,type:"error",size:"tiny"},"移除"),default:()=>f("span",{style:{maxWidth:"12rem"}},"确定要删除 ",e.username," ?")})))}]}),f(g,{show:O.value,onUpdateShow:e=>{O.value=e}},f(h,{style:"width: 500px;max-width: 90vw",headerStyle:{textAlign:"center"},title:T.value.id?"编辑":"新增"},f(w,null,f(b,{label:"名称",required:!0},f(x,{autofocus:!0,value:T.value.name,onInput:e=>{T.value.name=e}}))),f("div",{class:"text-right"},f(P,{size:12,align:"center",inline:!0},f(k,{type:"success",onClick:E,round:!0},"确定"),f(k,{onClick:()=>{O.value=!1,T.value={name:"",id:void 0}},round:!0},"取消"))))))}));export default O;
